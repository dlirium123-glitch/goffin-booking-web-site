<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Assistant de rendez-vous – Goffin</title>

  <!-- Firebase (Compat) -->
  <script defer src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

  <!-- Auto-config Firebase Hosting -->
  <script defer src="/__/firebase/init.js"></script>

  <script>
    console.log("index.html chargé ✅", location.href);
  </script>

  <style>
    :root{
      --brand:#0b3a6e;
      --brand2:#1b5fa8;
      --bg:#f5f7fb;
      --card:#ffffff;
      --muted:#6b7280;
      --line:#dbe3f0;
      --ok:#16a34a;
      --danger:#8a1f1f;
      --warn:#b45309;
      --shadow:0 10px 25px rgba(0,0,0,.08);
      --radius:14px;
    }

    *{box-sizing:border-box}

    body{
      margin:0;
      font-family: Arial, Helvetica, sans-serif;
      background: linear-gradient(180deg, #0b3a6e 0%, #0b3a6e 180px, var(--bg) 180px);
      color:#0f172a;
    }

    header{ color:#fff; padding:22px 18px; }

    .topbar{
      max-width:1100px; margin:0 auto;
      display:flex; gap:16px; align-items:flex-start; justify-content:space-between;
    }

    .brand h1{margin:0;font-size:20px;letter-spacing:.2px}
    .brand p{margin:6px 0 0;opacity:.9;font-size:13px}

    .status{
      display:flex;align-items:center;gap:10px;
      justify-content:flex-end;flex-wrap:wrap;
    }

    .pill{
      display:inline-flex;align-items:center;gap:8px;
      border:1px solid rgba(255,255,255,.25);
      padding:8px 10px;border-radius:999px;font-size:12px;
      background:rgba(255,255,255,.10);
    }
    .pill .dot{width:8px;height:8px;border-radius:50%;background:#f87171}
    .pill.ok .dot{background:#34d399}

    .btnTop{
      border:1px solid rgba(255,255,255,.25);
      background:#fff;color:var(--brand);
      padding:9px 12px;font-weight:800;border-radius:10px;cursor:pointer;
    }
    .btnTop.secondary{background:transparent;color:#fff}

    main{ max-width:1100px;margin:-30px auto 40px;padding:0 18px; }

    .grid{
      display:grid;
      grid-template-columns:1.4fr 1fr;
      gap:16px;
      align-items:start;
    }

    .card{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:16px;
    }

    h2{margin:0 0 10px;font-size:16px}
    h3{margin:14px 0 8px;font-size:14px}

    .muted{color:var(--muted);font-size:13px;line-height:1.4}

    .callout{
      margin-top:12px;border-radius:12px;padding:12px;
      border:1px solid var(--line);background:#f8fafc;font-size:13px;
    }
    .callout.blue{border-left:4px solid var(--brand2)}
    .callout.orange{border-left:4px solid #f59e0b;background:#fff7ed}
    .callout.green{border-left:4px solid #22c55e;background:#f0fdf4}
    .callout strong{display:block;margin-bottom:4px}

    .label{display:block;font-weight:800;margin:12px 0 6px;font-size:13px}

    input, select, textarea{
      width:100%;
      border:1px solid var(--line);
      border-radius:10px;
      padding:10px 11px;
      font-size:14px;
      outline:none;
      background:#fff;
    }

    textarea{min-height:90px;resize:vertical}

    input:focus, select:focus, textarea:focus{
      border-color:#9db7d8;
      box-shadow:0 0 0 3px rgba(27,95,168,.12);
    }

    .row{display:flex;gap:10px}
    .row > *{flex:1}

    .btn{
      width:100%;
      padding:11px 12px;
      border-radius:10px;
      border:1px solid var(--line);
      background:#fff;
      font-weight:900;
      cursor:pointer;
      transition: transform .05s ease, box-shadow .15s ease, border-color .15s ease;
    }
    .btn.primary{background:var(--brand);border-color:var(--brand);color:#fff}
    .btn.alt{background:#0f3f7a;color:#fff;border-color:#0f3f7a}
    .btn:disabled{opacity:.55;cursor:not-allowed}
    .btn:active{ transform: translateY(1px); }
    .btn:hover{ box-shadow:0 10px 20px rgba(0,0,0,.06); border-color:#9db7d8; }
    .btn.primary:hover{ border-color:var(--brand); }
    .btn.alt:hover{ border-color:#0f3f7a; }
    .btn.small{padding:8px 10px;font-weight:800;font-size:12px}

    .help{font-size:12px;color:var(--muted);margin-top:8px}

    .alert{
      margin-top:12px;padding:10px 12px;border-radius:10px;
      border:1px solid #f2c2c2;background:#fff5f5;color:var(--danger);
      font-weight:700;display:none;
    }
    .warn{
      margin-top:12px;padding:10px 12px;border-radius:10px;
      border:1px solid #fed7aa;background:#fff7ed;color:var(--warn);
      font-weight:800;display:none;
    }
    .ok{
      margin-top:12px;padding:10px 12px;border-radius:10px;
      border:1px solid #bbf7d0;background:#f0fdf4;color:#14532d;
      font-weight:800;display:none;
    }

    .step{
      display:inline-flex;align-items:center;gap:8px;font-size:12px;
      padding:7px 10px;border-radius:999px;border:1px solid var(--line);
      background:#f8fafc;font-weight:900;color:#0f172a;
    }

    .stepWrap{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
      margin-bottom:10px;
    }

    .divider{height:1px;background:var(--line);margin:14px 0}
    .tiny{font-size:12px;color:var(--muted)}

    .actionBox{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:10px;
      margin-top:10px;
    }

    .panel{
      margin-top:12px;
      border:1px solid var(--line);
      background:#f8fafc;
      border-radius:12px;
      padding:12px;
      display:none;
    }

    .linkRow{display:flex;justify-content:flex-end;margin-top:10px;}
    .linkBtn{
      border:0;background:transparent;color:var(--brand2);
      font-weight:900;cursor:pointer;padding:0;text-decoration:underline;font-size:12px;
    }

    .apptList{margin-top:12px;display:flex;flex-direction:column;gap:10px}
    .apptCard{border:1px solid var(--line);border-radius:12px;padding:10px 12px;background:#fff;}
    .apptTop{display:flex;justify-content:space-between;gap:10px;align-items:flex-start}
    .badge{
      font-size:12px;font-weight:900;padding:6px 8px;border-radius:999px;
      border:1px solid var(--line);background:#f8fafc;white-space:nowrap;
    }
    .badge.pending{border-color:#fed7aa;background:#fff7ed;color:var(--warn)}
    .badge.validated{border-color:#bbf7d0;background:#f0fdf4;color:#14532d}
    .badge.refused{border-color:#f2c2c2;background:#fff5f5;color:var(--danger)}
    .badge.cancelled{border-color:#e5e7eb;background:#f9fafb;color:#374151}

    @media (max-width: 920px){
      .grid{grid-template-columns:1fr}
      main{margin-top:-10px}
      .actionBox{grid-template-columns:1fr}
    }

    /* ===========================
       CALENDRIER — STYLE MODERNE
       =========================== */
    :root{
      --cal-bg:#ffffff;
      --cal-head:#f8fafc;
      --cal-grid:#e5e7eb;
      --cal-text:#0f172a;
      --cal-muted:#6b7280;

      --cal-free-bg:#ecfdf5;
      --cal-free-bd:#bbf7d0;
      --cal-block-bg:#f3f4f6;
      --cal-block-bd:#e5e7eb;
      --cal-sel-bg:#dbeafe;
      --cal-sel-bd:#93c5fd;

      --cal-hover: rgba(27,95,168,.10);
    }

    .calHeader{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
      margin-top:14px;
    }

    .calTitle{
      font-weight:900;
      font-size:14px;
      color:var(--cal-text);
    }

    #calSub{
      margin-top:2px;
      font-size:12px;
      color:var(--cal-muted);
    }

    .calNav{
      display:flex;
      gap:8px;
      align-items:center;
    }

    .calBtn{
      padding:8px 10px;
      border-radius:12px;
      border:1px solid var(--line);
      background:#fff;
      font-weight:900;
      cursor:pointer;
      font-size:12px;
      transition: transform .05s ease, box-shadow .15s ease, border-color .15s ease;
    }
    .calBtn:hover{
      border-color:#9db7d8;
      box-shadow: 0 8px 18px rgba(0,0,0,.06);
    }
    .calBtn:active{ transform: translateY(1px); }

    .calLegend{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      margin-top:10px;
      font-size:12px;
      color:var(--muted);
    }

    .dotKey{display:inline-flex; align-items:center; gap:6px}

    .kdot{
      width:10px;height:10px;border-radius:999px;
      display:inline-block;border:1px solid var(--line)
    }
    .kfree{ background:var(--cal-free-bg); border-color:var(--cal-free-bd); }
    .kblocked{ background:var(--cal-block-bg); border-color:var(--cal-block-bd); }
    .kselected{ background:var(--cal-sel-bg); border-color:var(--cal-sel-bd); }

    .calGrid{
      margin-top:10px;
      border:1px solid var(--line);
      border-radius:16px;
      overflow:hidden;
      background:var(--cal-bg);
      box-shadow: 0 10px 25px rgba(0,0,0,.06);
    }

    .calRow{
      display:grid;
      grid-template-columns: 92px repeat(5, 1fr);
      border-top:1px solid var(--cal-grid);
      min-height:44px;
    }
    .calRow:first-child{border-top:0}

    .calCell{
      padding:10px 10px;
      border-left:1px solid var(--cal-grid);
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:12px;
      color:var(--cal-text);
      user-select:none;
    }
    .calCell:first-child{border-left:0}

    .timeCell{
      justify-content:flex-start;
      font-weight:900;
      color:var(--cal-text);
      background:var(--cal-head);
      letter-spacing:.2px;
    }

    .dayHead{
      font-weight:900;
      background:var(--cal-head);
      position:sticky;
      top:0;
      z-index:2;
    }

    .slot{
      cursor:pointer;
      background:var(--cal-free-bg);
      position:relative;
      transition: transform .05s ease, box-shadow .15s ease, background .15s ease;
    }
    .slot:hover{
      box-shadow: inset 0 0 0 2px var(--cal-hover);
    }
    .slot:active{ transform: scale(.995); }

    .slot.blocked,
    .slot.disabled{
      cursor:not-allowed;
      background:var(--cal-block-bg);
      color:#9ca3af;
    }

    .slot.selected{
      background:var(--cal-sel-bg);
      box-shadow: inset 0 0 0 2px rgba(27,95,168,.35);
    }

    /* petite barre en bas pour look moderne */
    .slot::after{
      content:"";
      position:absolute;
      left:10px; right:10px; bottom:7px;
      height:3px;
      border-radius:999px;
      background: rgba(15,23,42,.06);
      opacity:0;
      transition: opacity .15s ease;
    }
    .slot:hover::after{ opacity:.9; }
    .slot.blocked::after,
    .slot.disabled::after{ opacity:0; }
    .slot.selected::after{
      opacity:1;
      background: rgba(27,95,168,.25);
    }

    @media (max-width: 920px){
      .calRow{ grid-template-columns: 82px repeat(5, 1fr); }
      .calCell{ padding:8px 8px; font-size:11px; }
    }
    @media (max-width: 520px){
      .calRow{ grid-template-columns: 72px repeat(5, 1fr); }
      .timeCell{ font-size:11px; }
    }
  </style>
</head>

<body>
<header>
  <div class="topbar">
    <div class="brand">
      <h1>Assistant de rendez-vous – Goffin</h1>
      <p>Réservé aux professionnels • Gaz naturel (GN) uniquement</p>
    </div>
    <div class="status">
      <span class="pill" id="pillStatus">
        <span class="dot"></span>
        <span id="statusText">Non connecté</span>
      </span>
      <button class="btnTop secondary" id="btnLogout" style="display:none;">Déconnexion</button>
    </div>
  </div>
</header>

<main>
  <div class="grid">
    <section class="card">
      <h2>Informations importantes</h2>
      <p class="muted">
        Cet outil centralise vos demandes de rendez-vous. Il est réservé aux <b>clients professionnels</b> disposant d’un <b>numéro d’entreprise</b>.
      </p>

      <div class="callout blue">
        <strong>Gaz naturel (GN) uniquement.</strong>
        Les installations propane et butane ne sont pas prises en charge.
      </div>

      <div class="callout orange">
        <strong>Politique d’annulation</strong>
        Tout rendez-vous non annulé <b>au minimum 48 heures</b> à l’avance est considéré comme presté et peut être facturé.
      </div>

      <div class="callout green">
        <strong>Confidentialité</strong>
        Vos données et vos demandes sont visibles uniquement par vous et l’administrateur.
        Les créneaux occupés apparaissent uniquement comme <b>indisponibles</b>.
      </div>

      <p class="tiny">Dernière mise à jour : <span>31/01/2026</span></p>
    </section>

    <section class="card" id="rightPanel"></section>
  </div>
</main>

<!-- APP CLIENT -->
<script defer src="/index.v3.js?v=v3-2026-02-07-2"></script>
</body>
</html>
